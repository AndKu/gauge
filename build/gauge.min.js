function Gauge(e,n){function t(e){return 90+g.configs.aperture/2+(360-g.configs.aperture)+g.configs.aperture/100*e}function r(e,n){var t=g.configs.aperture/100*(n-e)-180;return t>0?0:t}if(!e.length){n=n||{};var a={aperture:270,value:0,marks:[0,1,2,3,4,5,6],countMinorSegments:10,segments:[{endPosition:75,color:"gray"},{endPosition:85,color:"orange"},{endPosition:100,color:"red"}],marksInside:!1},g=this,o=!1;for(var s in a)"undefined"==typeof n[s]&&(n[s]=a[s]);this.configs=n,this._getDomElement=function(e){var n=document.createElement("div");return n.className=e,n},this._getSegment=function(e,n,a){(0>e||e>100||!e)&&(e=0),(0>n||n>100||!n)&&(n=100);var o=g._getDomElement("gauge__segment-start"),s=g._getDomElement("gauge__segment-end"),i=g._getDomElement("gauge__segment-color");return o.style.transform="rotate("+t(e)+"deg)",s.style.transform="rotate("+r(e,n)+"deg)",i.style.borderColor=a,s.appendChild(i),o.appendChild(s),o},this._drawSegments=function(){for(var e=!1,n=0,t=0;t<g.configs.segments.length;t++){if(g.configs.segments[t-1])var n=g.configs.segments[t-1].endPosition;if(e=g._getSegment(n,g.configs.segments[t].endPosition,g.configs.segments[t].color),g.configs.segments[t].endPosition-n>18e3/g.configs.aperture){var r=g._getSegment(g.configs.segments[t].endPosition-18e3/g.configs.aperture,g.configs.segments[t].endPosition,g.configs.segments[t].color);g.newGauge.appendChild(r)}g.newGauge.appendChild(e)}},this._getMark=function(e){var n=g._getDomElement(g.configs.marksInside?"gauge__mark gauge__mark--inside":"gauge__mark"),r=g._getDomElement(g.configs.marksInside?"gauge__mark-label gauge__mark-label--inside":"gauge__mark-label");r.textContent=g.configs.marks[e];var a=t(100/(g.configs.marks.length-1)*e);return n.style.transform="rotate("+a+"deg)",r.style.transform="rotate(-"+a+"deg)",n.appendChild(r),n},this._drawMarks=function(){for(var e=0;e<g.configs.marks.length;e++)g.newGauge.appendChild(g._getMark(e)),g._drawMinorMarks(e)},this._getMinorMark=function(e,n){var r=g._getDomElement(g.configs.marksInside?"gauge__mark gauge__mark--minor gauge__mark--inside":"gauge__mark gauge__mark--minor"),a=t(100/(g.configs.marks.length-1)*(n+e/g.configs.countMinorSegments));return r.style.transform="rotate("+a+"deg)",r},this._drawMinorMarks=function(e){if(!(g.configs.countMinorSegments<=0||e==g.configs.marks.length-1))for(var n=1;n<g.configs.countMinorSegments;n++)g.newGauge.appendChild(g._getMinorMark(n,e))},this._drawArrow=function(){var e=g._getDomElement(g.configs.marksInside?"gauge__arrow gauge__arrow--inside":"gauge__arrow"),n=g._getDomElement("gauge__arrow-round"),r=t(g.configs.value);e.style.transform="rotate("+r+"deg)",o=e,e.appendChild(n),g.newGauge.appendChild(e)},this.draw=function(){for(;e.lastChild;)e.removeChild(e.lastChild);var n=g._getDomElement("gaugeWrap");return g.newGauge=g._getDomElement("gauge"),g._drawSegments(),g._drawMarks(),g._drawArrow(),n.appendChild(this.newGauge),e.appendChild(n),g},this.setValue=function(e){e=e||0,0>e?e=0:e>100&&(e=100),g.value=e,o.style.transform="rotate("+t(e)+"deg)"},this.draw()}}!function(e){e.fn.gauge=function(e){return new Gauge(this[0],e)}}(jQuery);